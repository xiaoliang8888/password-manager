# å¯†ç ç®¡ç†å™¨ (Password Manager)

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ Next.js å’Œ shadcn/ui æ„å»ºçš„ç°ä»£åŒ–ã€å“åº”å¼çš„å¯†ç ç®¡ç†å™¨åº”ç”¨ã€‚å®ƒæä¾›äº†ä¸€ä¸ªç®€æ´ã€å®‰å…¨çš„ç•Œé¢æ¥å­˜å‚¨å’Œç®¡ç†æ‚¨çš„å¯†ç ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

- **ğŸ” å®‰å…¨è®¤è¯**ï¼šä½¿ç”¨ NextAuth.js è¿›è¡Œä¸“ä¸šçš„ç”¨æˆ·èº«ä»½è®¤è¯ã€‚
- **ğŸ‘¤ ç”¨æˆ·éš”ç¦»**ï¼šæ¯ä¸ªç”¨æˆ·åªèƒ½è®¿é—®å’Œç®¡ç†è‡ªå·±çš„å¯†ç è®°å½•ã€‚
- **ğŸ“‹ æŸ¥çœ‹å¯†ç åˆ—è¡¨**ï¼šåœ¨ä¸€ä¸ªæ¸…æ™°çš„è¡¨æ ¼ä¸­æŸ¥çœ‹æ‰€æœ‰å·²ä¿å­˜çš„è´¦å·ä¿¡æ¯ã€‚
- **â• æ–°å¢å¯†ç **ï¼šé€šè¿‡ä¸€ä¸ªæ–¹ä¾¿çš„å¯¹è¯æ¡†å¿«é€Ÿæ·»åŠ æ–°çš„ç½‘ç«™ã€ç”¨æˆ·åå’Œå¯†ç ã€‚
- **ğŸ“‹ ä¸€é”®å¤åˆ¶å¯†ç **ï¼šå•å‡»æŒ‰é’®å³å¯å°†å¯†ç å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œæ–¹ä¾¿å¿«æ·ã€‚
- **ğŸ“± å“åº”å¼è®¾è®¡**ï¼šåœ¨æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡ä¸Šå‡æœ‰è‰¯å¥½çš„è§†è§‰å’Œä½¿ç”¨ä½“éªŒã€‚
- **ğŸŒ™ æ·±è‰²æ¨¡å¼**ï¼šé»˜è®¤å¯ç”¨æ·±è‰²ä¸»é¢˜ï¼Œä¿æŠ¤æ‚¨çš„çœ¼ç›ã€‚
- **ğŸ—‘ï¸ åˆ é™¤å¯†ç **ï¼šè½»æ¾åˆ é™¤ä¸å†éœ€è¦çš„å¯†ç è®°å½•ã€‚

## ğŸš€ å¦‚ä½•å¼€å§‹

æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤åœ¨æ‚¨çš„æœ¬åœ°è®¡ç®—æœºä¸Šè¿è¡Œæ­¤é¡¹ç›®ã€‚

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/password-manager.git
cd password-manager
```

### 2. å®‰è£…ä¾èµ–

é¦–å…ˆï¼Œè¯·ç¡®ä¿æ‚¨å·²ç»å®‰è£…äº† [Node.js](https://nodejs.org/)ã€‚ç„¶åï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…é¡¹ç›®æ‰€éœ€çš„ä¾èµ–åŒ…ï¼š

```bash
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

æœ¬é¡¹ç›®ä½¿ç”¨ PostgreSQL æ•°æ®åº“ã€Prisma ORM å’Œ NextAuth.js è¿›è¡Œèº«ä»½è®¤è¯ã€‚

1.  **åˆ›å»º `.env` æ–‡ä»¶**ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ï¼Œå¤åˆ¶ `env.example` æ–‡ä»¶å¹¶é‡å‘½åä¸º `.env`ï¼š

    ```bash
    cp env.example .env
    ```

2.  **é…ç½®æ•°æ®åº“è¿æ¥**ï¼šåœ¨ `.env` æ–‡ä»¶ä¸­ï¼Œè®¾ç½® `DATABASE_URL` å˜é‡ï¼ŒæŒ‡å‘æ‚¨çš„ PostgreSQL æ•°æ®åº“ã€‚æ ¼å¼å¦‚ä¸‹ï¼š

    ```
    DATABASE_URL="postgresql://USER:PASSWORD@HOST:PORT/DATABASE"
    ```

    > å¦‚æœæ‚¨æ²¡æœ‰æ•°æ®åº“ï¼Œå¯ä»¥ä½¿ç”¨ [Vercel Postgres](https://vercel.com/storage/postgres) æˆ– [Supabase](https://supabase.com) ç­‰äº‘æœåŠ¡æä¾›çš„å…è´¹æ•°æ®åº“ã€‚

3.  **é…ç½® NextAuth å¯†é’¥**ï¼šåœ¨ `.env` æ–‡ä»¶ä¸­ï¼Œè®¾ç½®ä»¥ä¸‹å˜é‡ï¼š

    ```
    # ç”Ÿæˆä¸€ä¸ªéšæœºå¯†é’¥ç”¨äºåŠ å¯†ä¼šè¯
    NEXTAUTH_SECRET="your-secret-key-here"
    
    # è®¾ç½®åº”ç”¨çš„ URL
    NEXTAUTH_URL="http://localhost:3000"
    ```

    > ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆä¸€ä¸ªå®‰å…¨çš„éšæœºå¯†é’¥ï¼š
    > ```bash
    > openssl rand -base64 32
    > ```

4.  **è¿è¡Œæ•°æ®åº“è¿ç§»**ï¼šé…ç½®å¥½ç¯å¢ƒå˜é‡åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„ï¼š

    ```bash
    npx prisma migrate dev
    ```

### 4. è¿è¡Œå¼€å‘æœåŠ¡å™¨

å®Œæˆä»¥ä¸Šæ‰€æœ‰æ­¥éª¤åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š

```bash
npm run dev
```

### 3. æ‰“å¼€åº”ç”¨

ç°åœ¨ï¼Œåœ¨æ‚¨çš„æµè§ˆå™¨ä¸­æ‰“å¼€ [http://localhost:3000](http://localhost:3000)ï¼Œæ‚¨å°±å¯ä»¥çœ‹åˆ°å¹¶ä½¿ç”¨è¿™ä¸ªå¯†ç ç®¡ç†å™¨äº†ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: [Next.js](https://nextjs.org/) (React)
- **UI ç»„ä»¶åº“**: [shadcn/ui](https://ui.shadcn.com/)
- **æ ·å¼**: [Tailwind CSS](https://tailwindcss.com/)
- **è¯­è¨€**: [TypeScript](https://www.typescriptlang.org/)
- **èº«ä»½è®¤è¯**: [NextAuth.js](https://next-auth.js.org/)
- **æ•°æ®åº“ ORM**: [Prisma](https://www.prisma.io/)
- **æ•°æ®åº“**: [PostgreSQL](https://www.postgresql.org/)
- **é€šçŸ¥/æç¤º**: [Sonner](https://sonner.emilkowal.ski/)

## API ç«¯ç‚¹

ä»¥ä¸‹æ˜¯æœ¬åº”ç”¨æä¾›çš„ API ç«¯ç‚¹åŠå…¶è¯¦ç»†è¯´æ˜ã€‚

### å¯†ç ç®¡ç† (Passwords)

#### 1. è·å–æ‰€æœ‰å¯†ç 

- **ç«¯ç‚¹**: `GET /api/passwords`
- **æè¿°**: è·å–æ‰€æœ‰å·²ä¿å­˜çš„å¯†ç è®°å½•ã€‚
- **æˆåŠŸå“åº”** (çŠ¶æ€ç  `200`):
  ```json
  [
    {
      "id": "clx1y2b3c0000d8v9e7f6h5g4",
      "website": "example.com",
      "username": "user@example.com",
      "password": "password123"
    }
  ]
  ```

#### 2. æ–°å¢å¯†ç 

- **ç«¯ç‚¹**: `POST /api/passwords`
- **æè¿°**: åˆ›å»ºä¸€æ¡æ–°çš„å¯†ç è®°å½•ã€‚
- **è¯·æ±‚ä½“**:
  ```json
  {
    "website": "newsite.com",
    "username": "newuser",
    "password": "newpassword456"
  }
  ```
- **æˆåŠŸå“åº”** (çŠ¶æ€ç  `201`):
  ```json
  {
    "id": "clx1y3d4e0001d8v9a2b3c4d5",
    "website": "newsite.com",
    "username": "newuser",
    "password": "newpassword456"
  }
  ```

#### 3. åˆ é™¤å¯†ç 

- **ç«¯ç‚¹**: `DELETE /api/passwords/[id]`
- **æè¿°**: æ ¹æ®æŒ‡å®šçš„ `id` åˆ é™¤ä¸€æ¡å¯†ç è®°å½•ã€‚
- **URL å‚æ•°**:
  - `id` (string, required): è¦åˆ é™¤çš„å¯†ç è®°å½•çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚
- **æˆåŠŸå“åº”**: çŠ¶æ€ç  `204` (No Content)ï¼Œæ— è¿”å›å†…å®¹ã€‚
- **å¤±è´¥å“åº”** (çŠ¶æ€ç  `500`):
  ```json
  {
    "error": "æ— æ³•åˆ é™¤å¯†ç "
  }
  ```

### ç”¨æˆ·è®¤è¯ (Authentication)

æœ¬é¡¹ç›®ä½¿ç”¨ NextAuth.js è¿›è¡Œèº«ä»½è®¤è¯ï¼Œæä¾›äº†æ›´å®‰å…¨ã€æ›´å®Œå–„çš„ç”¨æˆ·è®¤è¯åŠŸèƒ½ã€‚

#### 1. ç”¨æˆ·æ³¨å†Œ

- **ç«¯ç‚¹**: `POST /api/auth/register`
- **æè¿°**: æ³¨å†Œä¸€ä¸ªæ–°ç”¨æˆ·ã€‚
- **è¯·æ±‚ä½“**:
  ```json
  {
    "email": "user@example.com",
    "password": "password123"
  }
  ```
- **æˆåŠŸå“åº”** (çŠ¶æ€ç  `201`):
  ```json
  {
    "message": "ç”¨æˆ·æ³¨å†ŒæˆåŠŸ"
  }
  ```

#### 2. ç”¨æˆ·ç™»å½•

- **ç«¯ç‚¹**: `POST /api/auth/signin`
- **æè¿°**: ç”¨æˆ·ç™»å½•ï¼ˆç”± NextAuth.js è‡ªåŠ¨å¤„ç†ï¼‰ã€‚
- **æ–¹å¼**: ä½¿ç”¨ NextAuth.js çš„ `signIn()` å‡½æ•°è¿›è¡Œç™»å½•ã€‚
- **å‰ç«¯ç¤ºä¾‹**:
  ```typescript
  import { signIn } from 'next-auth/react';
  
  const result = await signIn('credentials', {
    email: 'user@example.com',
    password: 'password123',
    redirect: false,
  });
  ```

#### 3. ç”¨æˆ·ç™»å‡º

- **ç«¯ç‚¹**: `POST /api/auth/signout`
- **æè¿°**: ç”¨æˆ·ç™»å‡ºï¼ˆç”± NextAuth.js è‡ªåŠ¨å¤„ç†ï¼‰ã€‚
- **å‰ç«¯ç¤ºä¾‹**:
  ```typescript
  import { signOut } from 'next-auth/react';
  
  await signOut({ redirect: false });
  ```

#### 4. è·å–ä¼šè¯ä¿¡æ¯

- **å‰ç«¯ç¤ºä¾‹**:
  ```typescript
  import { useSession } from 'next-auth/react';
  
  const { data: session, status } = useSession();
  ```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

æœ¬é¡¹ç›®å·²é›†æˆ NextAuth.jsï¼Œæä¾›äº†ä»¥ä¸‹å®‰å…¨ç‰¹æ€§ï¼š

- **ä¼šè¯ç®¡ç†**ï¼šä½¿ç”¨ JWT (JSON Web Token) è¿›è¡Œå®‰å…¨çš„ä¼šè¯ç®¡ç†ã€‚
- **å¯†ç åŠ å¯†**ï¼šä½¿ç”¨ bcrypt å¯¹ç”¨æˆ·å¯†ç è¿›è¡ŒåŠ å¯†å­˜å‚¨ã€‚
- **ç”¨æˆ·éš”ç¦»**ï¼šæ¯ä¸ªç”¨æˆ·åªèƒ½è®¿é—®å’Œç®¡ç†è‡ªå·±çš„å¯†ç è®°å½•ã€‚
- **API ä¿æŠ¤**ï¼šæ‰€æœ‰å¯†ç ç›¸å…³çš„ API éƒ½éœ€è¦ç”¨æˆ·ç™»å½•åæ‰èƒ½è®¿é—®ã€‚
- **CSRF ä¿æŠ¤**ï¼šNextAuth.js è‡ªåŠ¨æä¾› CSRF ä»¤ç‰Œä¿æŠ¤ã€‚

## â“ å¸¸è§é—®é¢˜

### 1. TypeScript æŠ¥é”™ï¼šæ‰¾ä¸åˆ° email æˆ– name å±æ€§

**é—®é¢˜**ï¼šåœ¨é›†æˆ NextAuth.js åï¼ŒTypeScript æç¤º User ç±»å‹ä¸Šä¸å­˜åœ¨ `email` æˆ– `name` å±æ€§ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. åœæ­¢å¼€å‘æœåŠ¡å™¨
# 2. é‡æ–°ç”Ÿæˆ Prisma Client
npx prisma generate

# 3. æ¸…ç† Next.js ç¼“å­˜
Remove-Item -Path ".next" -Recurse -Force

# 4. é‡å¯ IDE æˆ–é‡æ–°åŠ è½½çª—å£
# 5. é‡æ–°å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### 2. NextAuth æŠ¥é”™ï¼šPlease define a `secret`

**é—®é¢˜**ï¼šå¯åŠ¨åº”ç”¨æ—¶æç¤ºéœ€è¦å®šä¹‰ secretã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šåœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ  `NEXTAUTH_SECRET`ï¼š
```bash
# ä½¿ç”¨ Node.js ç”Ÿæˆéšæœºå¯†é’¥
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"

# å°†ç”Ÿæˆçš„å¯†é’¥æ·»åŠ åˆ° .env æ–‡ä»¶
NEXTAUTH_SECRET="ç”Ÿæˆçš„å¯†é’¥"
NEXTAUTH_URL="http://localhost:3000"
```

### 3. æ•°æ®åº“è¿ç§»å¤±è´¥æˆ–æ•°æ®ä¸¢å¤±

**é—®é¢˜**ï¼šè¿è¡Œ `prisma migrate dev` æ—¶æç¤ºä¼šä¸¢å¤±æ•°æ®ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¦‚æœæ˜¯å¼€å‘ç¯å¢ƒä¸”æ•°æ®ä¸é‡è¦ï¼Œä½¿ç”¨ `npx prisma db push --accept-data-loss`
- å¦‚æœéœ€è¦ä¿ç•™æ•°æ®ï¼Œè¯·å…ˆå¤‡ä»½æ•°æ®åº“ï¼Œç„¶åæ‰‹åŠ¨è¿ç§»

### 4. ç«¯å£ 3000 è¢«å ç”¨

**é—®é¢˜**ï¼šå¯åŠ¨æ—¶æç¤ºç«¯å£ 3000 å·²è¢«ä½¿ç”¨ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# Windows PowerShell - æŸ¥æ‰¾å¹¶ç»“æŸå ç”¨ç«¯å£çš„è¿›ç¨‹
Get-Process | Where-Object {$_.ProcessName -like "*node*"} | Stop-Process -Force

# æˆ–è€…ä½¿ç”¨å…¶ä»–ç«¯å£
npm run dev -- -p 3001
```

## ğŸ¯ å±•æœ›

æˆ‘ä»¬å·²ç»æˆåŠŸåœ°é›†æˆäº† NextAuth.js èº«ä»½è®¤è¯ç³»ç»Ÿï¼Œå¹¶å®ç°äº†ç”¨æˆ·æ•°æ®éš”ç¦»ã€‚

æœªæ¥çš„æ”¹è¿›æ–¹å‘åŒ…æ‹¬ï¼š

- **ç¼–è¾‘åŠŸèƒ½**ï¼šå®ç°ä¿®æ”¹å·²æœ‰å¯†ç è®°å½•çš„åŠŸèƒ½ã€‚
- **å¯†ç å¼ºåº¦æŒ‡ç¤ºå™¨**ï¼šåœ¨è¾“å…¥å¯†ç æ—¶æ˜¾ç¤ºå…¶å¼ºåº¦ã€‚
- **ç«¯åˆ°ç«¯åŠ å¯†**ï¼šå¯¹å­˜å‚¨çš„å¯†ç è¿›è¡Œç«¯åˆ°ç«¯åŠ å¯†ï¼Œè¿›ä¸€æ­¥æé«˜å®‰å…¨æ€§ã€‚
- **åŒå› ç´ è®¤è¯**ï¼šæ·»åŠ  2FA æ”¯æŒï¼Œæä¾›é¢å¤–çš„å®‰å…¨å±‚ã€‚
- **å¯†ç ç”Ÿæˆå™¨**ï¼šå†…ç½®å¼ºå¯†ç ç”Ÿæˆå·¥å…·ã€‚
- **å¯†ç åˆ†ç±»**ï¼šæ”¯æŒæŒ‰ç±»åˆ«ç»„ç»‡å¯†ç ï¼ˆå·¥ä½œã€ä¸ªäººã€é‡‘èç­‰ï¼‰ã€‚
- **å¯†ç åˆ†äº«**ï¼šå®‰å…¨åœ°ä¸å›¢é˜Ÿæˆå‘˜åˆ†äº«å¯†ç ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºæ–°åŠŸèƒ½å»ºè®®ï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºä½ çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤ä½ çš„æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ä¸€ä¸ª Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ [Issue](https://github.com/your-username/password-manager/issues)
- å‘é€é‚®ä»¶è‡³ï¼šyour-email@example.com

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼**
